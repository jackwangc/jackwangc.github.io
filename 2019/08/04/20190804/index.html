<!DOCTYPE html>





<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    save_scroll: false,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    search: {
      root: '/',
      path: ''
    },
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="实验室 .net 项目常识总结sql server 常用操作基础操作select 语法 select Column-name from table-name 查询基本语法  SELECT DISTINCT column_name,column_name FROM table_name 查询列出不同（distinct）的值  SELECT column_name,column_name FROM t">
<meta name="keywords" content="c#">
<meta property="og:type" content="article">
<meta property="og:title" content="实验室 .net 项目常识总结">
<meta property="og:url" content="http://yoursite.com/2019/08/04/20190804/index.html">
<meta property="og:site_name" content="叶落 知秋">
<meta property="og:description" content="实验室 .net 项目常识总结sql server 常用操作基础操作select 语法 select Column-name from table-name 查询基本语法  SELECT DISTINCT column_name,column_name FROM table_name 查询列出不同（distinct）的值  SELECT column_name,column_name FROM t">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-08-04T08:28:38.365Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="实验室 .net 项目常识总结">
<meta name="twitter:description" content="实验室 .net 项目常识总结sql server 常用操作基础操作select 语法 select Column-name from table-name 查询基本语法  SELECT DISTINCT column_name,column_name FROM table_name 查询列出不同（distinct）的值  SELECT column_name,column_name FROM t">
  <link rel="canonical" href="http://yoursite.com/2019/08/04/20190804/">


<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>实验室 .net 项目常识总结 | 叶落 知秋</title>
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">叶落 知秋</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
    <ul id="menu" class="menu">
        
        
        
          
          <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
    </ul>
</nav>

</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/04/20190804/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jack Wang">
      <meta itemprop="description" content="个人知识总结">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="叶落 知秋">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">实验室 .net 项目常识总结

              
            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-08-04 11:15:26 / 修改时间：16:28:38" itemprop="dateCreated datePublished" datetime="2019-08-04T11:15:26+08:00">2019-08-04</time>
            </span>
          
            

            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon"
              >
                <i class="fa fa-eye"></i>
                 阅读次数： 
                <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
              </span>
            </span>
          <br>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="实验室-net-项目常识总结"><a href="#实验室-net-项目常识总结" class="headerlink" title="实验室 .net 项目常识总结"></a>实验室 .net 项目常识总结</h1><h2 id="sql-server-常用操作"><a href="#sql-server-常用操作" class="headerlink" title="sql server 常用操作"></a>sql server 常用操作</h2><h3 id="基础操作"><a href="#基础操作" class="headerlink" title="基础操作"></a>基础操作</h3><h4 id="select-语法"><a href="#select-语法" class="headerlink" title="select 语法"></a>select 语法</h4><ul>
<li><p><code>select Column-name from table-name</code> 查询基本语法</p>
</li>
<li><p><code>SELECT DISTINCT column_name,column_name FROM table_name</code> 查询列出不同（distinct）的值</p>
</li>
<li><p><code>SELECT column_name,column_name FROM table_name WHERE column_name operator value</code> 条件查询</p>
<ul>
<li>比较运算: 条件：列，比较运算符，值 比较运算符包涵：= &gt; &lt; &gt;= ,&lt;=, !=,&lt;&gt; 表示（不等于）</li>
<li>逻辑运算: And:与 同时满足两个条件的值; Or:或 满足其中一个条件的值; Not:非 满足不包含该条件的值</li>
<li>特殊条件: 空值判断： is null ; between and (在之间的值) ; in(5000,3000,1500) ; like 模糊查询</li>
<li><code>Select * from emp where ename like &#39;M%&#39;</code></li>
</ul>
</li>
<li><p><code>SELECT column_name,column_name FROM table_name ORDER BY column_name,column_name ASC|DESC</code> 对查询记录排序</p>
</li>
<li><p><code>SELECT column_name(s) FROM table_name LIMIT number</code> mysql 语法; </p>
</li>
<li><p><code>SELECT TOP number|percent column_name(s)FROM table_name;</code> sql server 语法 返回规定数目</p>
</li>
</ul>
<h4 id="insert-语法"><a href="#insert-语法" class="headerlink" title="insert 语法"></a>insert 语法</h4><ul>
<li>语法一：<code>INSERT INTO table_name VALUES (value1,value2,value3,...)</code></li>
<li>语法二：<code>INSERT INTO table_name (column1,column2,column3,...) VALUES (value1,value2,value3,...)</code></li>
</ul>
<h4 id="update-语法"><a href="#update-语法" class="headerlink" title="update 语法"></a>update 语法</h4><ul>
<li><code>UPDATE table_name SET column1=value1,column2=value2,... WHERE some_column=some_value</code> 更新语法</li>
</ul>
<h4 id="delete-语法"><a href="#delete-语法" class="headerlink" title="delete 语法"></a>delete 语法</h4><ul>
<li><code>DELETE FROM table_name WHERE some_column=some_value</code></li>
<li><code>DELETE * FROM table_name;</code> 删除表中数据</li>
<li><code>DELETE FROM TABLE_NAME WHERE &lt;搜索条件&gt;</code> 删除前多少行数据</li>
<li>搜索条件可以是判断和语句,<code>select top 2000 id from tablename order by</code></li>
</ul>
<h4 id="drop-语法"><a href="#drop-语法" class="headerlink" title="drop 语法"></a>drop 语法</h4><ul>
<li><code>DROP TABLE table_name</code> 删除表</li>
<li><code>DROP DATABASE database_name</code> 删除数据库</li>
<li><code>DROP INDEX index_name ON table_name</code> 删除索引</li>
</ul>
<h3 id="高级操作"><a href="#高级操作" class="headerlink" title="高级操作"></a>高级操作</h3><h4 id="高级删除"><a href="#高级删除" class="headerlink" title="高级删除"></a>高级删除</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1. 删除重复记录</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查找重复记录根据 单个字段 storecode 判断</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> K_D_StoreReceipt</span><br><span class="line"><span class="keyword">where</span> StoreCode <span class="keyword">in</span> (<span class="keyword">select</span> StoreCode <span class="keyword">from</span> K_D_StoreReceipt <span class="keyword">group</span> <span class="keyword">by</span> StoreCode <span class="keyword">having</span> <span class="keyword">count</span>(StoreCode) &gt; <span class="number">1</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除多余重复记录</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> people </span><br><span class="line"><span class="keyword">where</span>   peopleName <span class="keyword">in</span> (<span class="keyword">select</span> peopleName    <span class="keyword">from</span> people <span class="keyword">group</span> <span class="keyword">by</span> peopleName      <span class="keyword">having</span> <span class="keyword">count</span>(peopleName) &gt; <span class="number">1</span>) </span><br><span class="line"><span class="keyword">and</span>   peopleId <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> <span class="keyword">min</span>(peopleId) <span class="keyword">from</span> people <span class="keyword">group</span> <span class="keyword">by</span> peopleName     <span class="keyword">having</span> <span class="keyword">count</span>(peopleName)&gt;<span class="number">1</span>) </span><br><span class="line"></span><br><span class="line">// row_number函数在数据库中的功能是为每一行 按照一定的规则生成一个编号</span><br><span class="line">// <span class="keyword">partition</span>  <span class="keyword">by</span> 用于给结果集分组</span><br><span class="line"><span class="comment">/*删除 keyId重复数据 中的另外几条*/</span></span><br><span class="line"><span class="keyword">delete</span> [A2] <span class="keyword">from</span> </span><br><span class="line">(<span class="keyword">select</span> row_number() <span class="keyword">over</span> (<span class="keyword">Partition</span> <span class="keyword">By</span> keyId <span class="keyword">order</span> <span class="keyword">by</span> keyId) <span class="keyword">as</span> keyId2,* <span class="keyword">from</span> A ) <span class="keyword">as</span> [A2]</span><br><span class="line"><span class="keyword">where</span> [A2].keyId2  &gt;<span class="number">1</span> </span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">/*删除 所有列都重复数据 中的另外几条*/</span></span><br><span class="line"><span class="keyword">delete</span> [A2] <span class="keyword">from</span> </span><br><span class="line">(<span class="keyword">select</span> row_number() <span class="keyword">over</span> (<span class="keyword">Partition</span> <span class="keyword">By</span> keyId,info <span class="keyword">order</span> <span class="keyword">by</span> keyId) <span class="keyword">as</span> keyId2,* <span class="keyword">from</span> A ) <span class="keyword">as</span> [A2]</span><br><span class="line"><span class="keyword">where</span> [A2].keyId2  &gt;<span class="number">1</span></span><br></pre></td></tr></table></figure>

<h4 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Websites.id, Websites.name, access_log.count, access_log.date</span><br><span class="line"><span class="keyword">FROM</span> Websites</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> access_log             <span class="comment"># inener join, left, right, full</span></span><br><span class="line"><span class="keyword">ON</span> Websites.id=access_log.site_id;</span><br></pre></td></tr></table></figure>

<h4 id="合并查询"><a href="#合并查询" class="headerlink" title="合并查询"></a>合并查询</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s) <span class="keyword">FROM</span> table1 <span class="comment"># 展示合并后的查询结果</span></span><br><span class="line"><span class="keyword">UNION</span>  <span class="comment"># UNION ALL 允许重复</span></span><br><span class="line"><span class="keyword">SELECT</span> column_name(s) <span class="keyword">FROM</span> table2;</span><br></pre></td></tr></table></figure>

<h4 id="INSERT-INTO-SELECT"><a href="#INSERT-INTO-SELECT" class="headerlink" title="INSERT INTO SELECT"></a>INSERT INTO SELECT</h4><ul>
<li><code>INSERT INTO table2 SELECT * FROM table1;</code> 把数据插入另外一张表</li>
</ul>
<h4 id="alter-向表中添加约束"><a href="#alter-向表中添加约束" class="headerlink" title="alter 向表中添加约束"></a>alter 向表中添加约束</h4><h4 id="sql-server-常用数据类型"><a href="#sql-server-常用数据类型" class="headerlink" title="sql server 常用数据类型"></a>sql server 常用数据类型</h4><table>
<thead>
<tr>
<th>数据类型</th>
<th>描述</th>
<th>数据类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>int</td>
<td>整型</td>
<td>float</td>
<td>浮点型</td>
</tr>
<tr>
<td>date</td>
<td>日期</td>
<td>time</td>
<td>时间</td>
</tr>
<tr>
<td>char</td>
<td>固定字符串</td>
<td>varchar</td>
<td>可变字符串</td>
</tr>
</tbody></table>
<h3 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 建立数据库</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> my_db;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> table_name</span><br><span class="line">(</span><br><span class="line">column_name1 data_type(<span class="keyword">size</span>),   <span class="comment"># PersonID int,</span></span><br><span class="line">column_name2 data_type(<span class="keyword">size</span>),   <span class="comment"># LastName varchar(255),</span></span><br><span class="line">column_name3 data_type(<span class="keyword">size</span>) <span class="keyword">IDENTITY</span>(<span class="number">1</span>,<span class="number">1</span>),  <span class="comment"># 执行 auto-increment 任务, 自增</span></span><br><span class="line">....</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 约束实例</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Persons</span><br><span class="line">(</span><br><span class="line">P_Id <span class="built_in">int</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> PRIMARY <span class="keyword">KEY</span>,  <span class="comment"># 主键 对主键命名 主键唯一</span></span><br><span class="line">LastName <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">CHECK</span> (P_Id&gt;<span class="number">0</span>), <span class="comment"># CHECK 限制列中值得范围</span></span><br><span class="line">FirstName <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="string">'Sandnes'</span>, <span class="comment"># default 向列中插入默认值</span></span><br><span class="line">Address <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> <span class="keyword">REFERENCES</span> Persons(P_Id), <span class="comment"># 外键</span></span><br><span class="line">City <span class="built_in">varchar</span>(<span class="number">255</span>)</span><br><span class="line">// <span class="keyword">CONSTRAINT</span> pk_PersonID PRIMARY <span class="keyword">KEY</span> (P_Id,LastName) 多个列联合起来形成一个主键</span><br><span class="line">// <span class="keyword">CONSTRAINT</span> fk_PerOrders <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (P_Id) <span class="keyword">REFERENCES</span> Persons(P_Id) 对外键进行命名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 表已创建对键的操作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Orders  <span class="comment"># ALTER TABLE 语句用于在已有的表中添加、删除或修改列</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> pk_PersonID PRIMARY <span class="keyword">KEY</span> (P_Id,LastName  <span class="comment"># 创建主键</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (P_Id) <span class="keyword">REFERENCES</span> Persons(P_Id)  <span class="comment"># 创建外键 一个表中的 FOREIGN KEY 需指向另一个表中的 PRIMARY KEY</span></span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> chk_Person <span class="keyword">CHECK</span> (P_Id&gt;<span class="number">0</span> <span class="keyword">AND</span> City=<span class="string">'Sandnes'</span>) <span class="comment"># check 约束</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> fk_PerOrders   <span class="comment"># 删除外键</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> column_name datatype <span class="comment"># 修改列的类型(modify-mysql)</span></span><br></pre></td></tr></table></figure>

<h3 id="sql-约束（Constraints）"><a href="#sql-约束（Constraints）" class="headerlink" title="sql 约束（Constraints）"></a>sql 约束（Constraints）</h3><table>
<thead>
<tr>
<th>约束</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>not null</td>
<td>约束强制列不接受 NULL 值</td>
</tr>
<tr>
<td>UNIQUE</td>
<td>约束唯一标识数据库表中的每条记录(不唯一)</td>
</tr>
<tr>
<td>PRIMARY KEY</td>
<td>约束唯一标识数据库表中的每条记录(唯一)</td>
</tr>
<tr>
<td>FOREIGN KEY</td>
<td>用于预防破坏表之间连接的行为,也能防止非法数据插入外键列</td>
</tr>
<tr>
<td>CHECK</td>
<td>限制列中值得范围</td>
</tr>
<tr>
<td>DEFAULT</td>
<td>向列中插入默认值</td>
</tr>
<tr>
<td>INDEX</td>
<td>索引, 用来加速搜索和查询</td>
</tr>
</tbody></table>
<h3 id="sql-视图"><a href="#sql-视图" class="headerlink" title="sql 视图"></a>sql 视图</h3><blockquote>
<p>视图是可视化的表。在 SQL 中，视图是基于 SQL 语句的结果集的可视化的表</p>
</blockquote>
<h4 id="什么情况下会用到视图"><a href="#什么情况下会用到视图" class="headerlink" title="什么情况下会用到视图"></a>什么情况下会用到视图</h4><ul>
<li>一个比较复杂的查询不想每次都写很多语句，就可以写个视图</li>
<li>给特定用户开放某些表的读取权限，但要加一些行和列的限制</li>
</ul>
<h4 id="视图的优点"><a href="#视图的优点" class="headerlink" title="视图的优点"></a>视图的优点</h4><ul>
<li>使用视图，可以定制用户数据，聚焦特定的数据</li>
<li>使用视图，可以简化数据操作</li>
<li>使用视图，基表中的数据就有了一定的安全性</li>
<li>可以合并分离的数据，创建分区视图</li>
</ul>
<h2 id="dev-操作"><a href="#dev-操作" class="headerlink" title="dev 操作"></a>dev 操作</h2><h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><ol>
<li><p>无法修改gridview 数据时，将表属性中更新检查更改为 never</p>
</li>
<li><p>控件由于都是服务器控件点击时会刷新页面 可以用<code>autopostback=false</code> 屏蔽掉刷新</p>
<h3 id="aspxSplitter-分隔符用法"><a href="#aspxSplitter-分隔符用法" class="headerlink" title="aspxSplitter 分隔符用法"></a>aspxSplitter 分隔符用法</h3></li>
<li><p>无嵌套 splitter</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;dx:ASPxSplitter ID=<span class="string">"ASPxSplitter1"</span> runat=<span class="string">"server"</span> Height=<span class="string">"100%"</span> Width=<span class="string">"100%"</span> ClientIDMode=<span class="string">"AutoID"</span> &gt;</span><br><span class="line">        &lt;Panes&gt;</span><br><span class="line">            &lt;dx:SplitterPane Size=<span class="string">"30%"</span> ScrollBars =<span class="string">"Auto"</span>&gt;</span><br><span class="line">                &lt;ContentCollection&gt;  <span class="comment">// 标签1 添加进去之后 必须增加这两个标签</span></span><br><span class="line">                    &lt;dx:SplitterContentControl&gt; <span class="comment">// 标签2 </span></span><br><span class="line">                       </span><br><span class="line">                    &lt;/dx:SplitterContentControl&gt; </span><br><span class="line">                &lt;/ContentCollection&gt;</span><br><span class="line">            &lt;/dx:SplitterPane&gt;</span><br><span class="line">            &lt;dx:SplitterPane&gt;&lt;/dx:SplitterPane&gt;</span><br><span class="line">        &lt;/Panes&gt;</span><br><span class="line">&lt;/dx:ASPxSplitter&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>嵌套 splitter</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;dx:ASPxSplitter ID=<span class="string">"ASPxSplitter1"</span> runat=<span class="string">"server"</span> Height=<span class="string">"100%"</span> Width=<span class="string">"100%"</span> ClientIDMode=<span class="string">"AutoID"</span> &gt;</span><br><span class="line">        &lt;Panes&gt;</span><br><span class="line">            &lt;dx:SplitterPane Size=<span class="string">"30%"</span> ScrollBars =<span class="string">"Auto"</span>&gt;</span><br><span class="line">                &lt;ContentCollection&gt;  <span class="comment">// 标签1 添加进去之后 必须增加这两个标签</span></span><br><span class="line">                    &lt;dx:SplitterContentControl&gt; <span class="comment">// 标签2 </span></span><br><span class="line">                       </span><br><span class="line">                    &lt;/dx:SplitterContentControl&gt; </span><br><span class="line">                &lt;/ContentCollection&gt;</span><br><span class="line">            &lt;/dx:SplitterPane&gt;</span><br><span class="line">            &lt;dx:SplitterPane&gt;</span><br><span class="line">                &lt;Panes&gt;</span><br><span class="line">                    &lt;dx:SplitterPane Size=<span class="number">30</span>%&gt;</span><br><span class="line">                        &lt;ContentCollection&gt;</span><br><span class="line">                        </span><br><span class="line">                        &lt;/ContentCollection&gt;</span><br><span class="line">                    &lt;/dx:SplitterPane&gt;</span><br><span class="line">                    &lt;dx:SplitterPane&gt;</span><br><span class="line">                        &lt;ContentCollection&gt;</span><br><span class="line">                        </span><br><span class="line">                        &lt;/ContentCollection&gt;</span><br><span class="line">                    &lt;/dx:SplitterPane&gt;&lt;d</span><br><span class="line">                &lt;/Panes&gt;</span><br><span class="line">            &lt;/dx:SplitterPane&gt;</span><br><span class="line">        &lt;/Panes&gt;</span><br><span class="line">&lt;/dx:ASPxSplitter&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="treeView-用法"><a href="#treeView-用法" class="headerlink" title="treeView 用法"></a>treeView 用法</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">&lt;dx:ASPxTreeView ID=<span class="string">"ASPxTreeView1"</span> runat=<span class="string">"server"</span> </span><br><span class="line">ClientIDMode=<span class="string">"AutoID"</span></span><br><span class="line">EnableCallBacks=<span class="string">"True"</span> AllowSelectNode=<span class="string">"True"</span> OnVirtualModeCreateChildren=<span class="string">"treeView_VirtualModeCreateChildren"</span>&gt;   <span class="comment">// 初始化treeView 列表</span></span><br><span class="line">&lt;/dx:ASPxTreeView&gt;</span><br><span class="line"><span class="comment"><span class="doctag">///</span><span class="doctag">///</span>第一种方法</span></span><br><span class="line"><span class="comment">// 适合用于表中有明确父子关系的</span></span><br><span class="line"><span class="comment">// treeView 后台添加数据方法</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">newCreateTree</span>(<span class="params">TreeViewVirtualModeCreateChildrenEventArgs e</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 结果</span></span><br><span class="line">    List&lt;TreeViewVirtualNode&gt; children = <span class="keyword">new</span> List&lt;TreeViewVirtualNode&gt;();</span><br><span class="line">    f(<span class="keyword">string</span>.IsNullOrEmpty(e.NodeName))&#123;</span><br><span class="line">    <span class="comment">// 1. 建立头节点</span></span><br><span class="line">    <span class="comment">// 存放节点方法 TreeViewVirtualNode(string name, string text);</span></span><br><span class="line">    TreeViewVirtualNode childNode </span><br><span class="line">    = <span class="keyword">new</span> TreeViewVirtualNode(root_department.id.ToString(), root_department.DepartmentName, root_department.S_Department_Type.ImageUrl);</span><br><span class="line">    childNode.IsLeaf = <span class="literal">false</span>;</span><br><span class="line">    children.Add(childNode);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">// 头节点已经建立 然后建立子节点</span></span><br><span class="line">     view_department_child()</span><br><span class="line">     &#125;</span><br><span class="line">      e.Children = children;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="comment">// 建立子节点</span></span><br><span class="line"> <span class="comment">// 参数 1.结果集</span></span><br><span class="line"> <span class="comment">// 2. 查询参数</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">view_department_child</span>(<span class="params">List&lt;TreeViewVirtualNode&gt; children, <span class="keyword">int</span> root_department_id</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 建立节点 </span></span><br><span class="line">    TreeViewVirtualNode childNode = <span class="keyword">new</span> TreeViewVirtualNode(department.id.ToString(), department.DepartmentName);</span><br><span class="line">    <span class="comment">// 当节点为叶子节点时 </span></span><br><span class="line">    childNode.IsLeaf = <span class="literal">true</span>;</span><br><span class="line">    childNode.Enabled = <span class="literal">false</span>;</span><br><span class="line">    children.Add(childNode);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="doctag">///</span>// 第二种方法</span></span><br><span class="line"><span class="comment">// 页面加载时添加节点</span></span><br><span class="line"><span class="comment">// 表中没有明确的父子关系</span></span><br><span class="line"><span class="comment">//例子 设备树的建立</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">Page_Load</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!Page.IsPostBack)</span><br><span class="line">            &#123;</span><br><span class="line">                ASPxTreeView1.Dispose(); <span class="comment">//清理树</span></span><br><span class="line"></span><br><span class="line">                TreeViewNodeCollection tnc = <span class="keyword">this</span>.ASPxTreeView1.Nodes;</span><br><span class="line">                <span class="comment">// 查询到大类</span></span><br><span class="line">                <span class="keyword">var</span> bigCategorys = <span class="keyword">from</span> t <span class="keyword">in</span> db.F_FacilityBigCategory</span><br><span class="line">                                   <span class="keyword">select</span> t;</span><br><span class="line">                <span class="keyword">foreach</span> (<span class="keyword">var</span> bigCategory <span class="keyword">in</span> bigCategorys)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">var</span> smallCategorys = <span class="keyword">from</span> t <span class="keyword">in</span> db.F_FacilitySmallCategory</span><br><span class="line">                                         <span class="keyword">where</span> t.BigCategoryID == bigCategory.ID</span><br><span class="line">                                         <span class="keyword">select</span> t;</span><br><span class="line">                    <span class="keyword">if</span> (smallCategorys != <span class="literal">null</span>) &#123;</span><br><span class="line">                        TreeViewNode children = <span class="keyword">new</span> TreeViewNode(bigCategory.Name, bigCategory.ID.ToString());</span><br><span class="line">                        <span class="comment">// 查询到小类</span></span><br><span class="line"></span><br><span class="line">                        <span class="keyword">foreach</span> (<span class="keyword">var</span> smallCategory <span class="keyword">in</span> smallCategorys)</span><br><span class="line">                        &#123;                           </span><br><span class="line">                            TreeViewNode son = <span class="keyword">new</span> TreeViewNode(smallCategory.Name, smallCategory.ID.ToString());</span><br><span class="line">                            <span class="comment">// 查询到设备</span></span><br><span class="line">                            <span class="keyword">var</span> facilitys = <span class="keyword">from</span> t <span class="keyword">in</span> db.F_FacilityInfo</span><br><span class="line">                                            <span class="keyword">where</span> t.BigCategoryID == smallCategory.BigCategoryID &amp;&amp; t.SmallCategoryID == smallCategory.ID</span><br><span class="line">                                            <span class="keyword">select</span> t;</span><br><span class="line">                            <span class="keyword">if</span> (facilitys != <span class="literal">null</span>) &#123; </span><br><span class="line">                                <span class="keyword">foreach</span>(<span class="keyword">var</span> facility <span class="keyword">in</span> facilitys)&#123;</span><br><span class="line">                                    TreeViewNode sun = <span class="keyword">new</span> TreeViewNode(facility.Name,facility.ID.ToString());</span><br><span class="line">                                    <span class="comment">// 设备添加</span></span><br><span class="line">                                    son.Nodes.Add(sun);</span><br><span class="line">                                &#125;</span><br><span class="line">                                </span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="comment">// 小类添加</span></span><br><span class="line">                            children.Nodes.Add(son);</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// 大类添加</span></span><br><span class="line">                        tnc.Add(children);</span><br><span class="line">                    &#125;                   </span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h3 id="从一个控件传值到另外一个控件"><a href="#从一个控件传值到另外一个控件" class="headerlink" title="从一个控件传值到另外一个控件"></a>从一个控件传值到另外一个控件</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;ClientSideEvents NodeClick=<span class="string">"function(s, e) &#123;</span></span><br><span class="line"><span class="string">	click_callback.PerformCallback(e.node.name);</span></span><br><span class="line"><span class="string">&#125;"</span>/&gt;</span><br><span class="line"></span><br><span class="line">&lt;dx:ASPxCallbackPanel ID=<span class="string">"click_callback"</span> runat=<span class="string">"server"</span>  LoadingPanelText=<span class="string">"请稍后"</span> OnCallback=<span class="string">"click_node"</span> Width=<span class="string">"100%"</span> ClientInstanceName=<span class="string">"click_callback"</span>&gt;</span><br><span class="line">                                &lt;PanelCollection&gt;</span><br><span class="line">                                    &lt;dx:PanelContent  ID=<span class="string">"PanelContent1"</span> runat=<span class="string">"server"</span> SupportsDisabledAttribute=<span class="string">"True"</span>&gt;</span><br><span class="line"></span><br><span class="line">                                    &lt;/dx:PanelContent&gt;</span><br><span class="line">                                &lt;/PanelCollection&gt;</span><br><span class="line">                            &lt;/dx:ASPxCallbackPanel&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 后台调用</span></span><br><span class="line"> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">click_node</span>(<span class="params"><span class="keyword">object</span> sender, CallbackEventArgsBase e</span>)</span>&#123;</span><br><span class="line">       e.Parameter     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自定义数据源"><a href="#自定义数据源" class="headerlink" title="自定义数据源"></a>自定义数据源</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 添加数据源</span></span><br><span class="line">&lt;asp:LinqDataSource ID=<span class="string">"LinqDataSource1"</span> runat=<span class="string">"server"</span>&gt;&lt;/asp:LinqDataSource&gt;</span><br><span class="line"><span class="comment">// 2. 添加隐藏域</span></span><br><span class="line"> &lt;asp:HiddenField ID=<span class="string">"hide_type_id"</span> runat=<span class="string">"server"</span> /&gt;</span><br><span class="line"><span class="comment">// 3. 后台给隐藏域赋值</span></span><br><span class="line">hide_type_id.Value = e.Parameter;</span><br><span class="line"><span class="comment">// 4. 数据源自定义（将隐藏域条件发送到数据源）</span></span><br><span class="line"><span class="comment">// 在数据源配置页面里选择</span></span><br><span class="line"><span class="comment">// 5. 必加属性 EnableViewState="false" 不加不能删除</span></span><br></pre></td></tr></table></figure>

<h3 id="弹出框"><a href="#弹出框" class="headerlink" title="弹出框"></a>弹出框</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 调用弹出框</span></span><br><span class="line">&lt;ClientSideEvents ItemClick=<span class="string">"function(s, e) &#123; MenuItemClick(e); &#125;"</span>&gt;&lt;/ClientSideEvents&gt;</span><br><span class="line"><span class="comment">// 2. js</span></span><br><span class="line">    <span class="function">function <span class="title">MenuItemClick</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (e.item.name) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"addType"</span>:</span><br><span class="line">                NewType.Show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// 3. 弹出框页面</span></span><br><span class="line">        &lt;dx:ASPxPopupControl ID=<span class="string">"addType"</span> runat=<span class="string">"server"</span> CloseAction=<span class="string">"CloseButton"</span> Width=<span class="string">"300"</span> PopupHorizontalAlign=<span class="string">"WindowCenter"</span>PopupVerticalAlign=<span class="string">"WindowCenter"</span> ClientInstanceName=<span class="string">"NewDepartment"</span></span><br><span class="line">                HeaderText=<span class="string">"新建类型"</span> AllowDragging=<span class="string">"True"</span> EnableAnimation=<span class="string">"False"</span> EnableViewState=<span class="string">"False"</span>&gt;</span><br><span class="line">            &lt;%--作用: 清空--%&gt;</span><br><span class="line">            &lt;ClientSideEvents PopUp=<span class="string">"function(s, e) &#123; ASPxClientEdit.ClearGroup('NewDeptGroup'); NewDepartmentName.Focus(); &#125;"</span> /&gt;</span><br><span class="line">            &lt;ContentCollection&gt;</span><br><span class="line">                &lt;dx:PopupControlContentControl runat=<span class="string">"server"</span> SupportsDisabledAttribute=<span class="string">"True"</span>&gt;</span><br><span class="line">                    &lt;dx:ASPxPanel ID=<span class="string">"aspPanel"</span> runat=<span class="string">"server"</span> ClientIDMode=<span class="string">"AutoID"</span> Width=<span class="string">"207px"</span>&gt;</span><br><span class="line">                        &lt;PanelCollection&gt;</span><br><span class="line">                            &lt;dx:PanelContent runat=<span class="string">"server"</span> SupportsDisabledAttribute=<span class="string">"True"</span>&gt;</span><br><span class="line">                                &lt;table cellpadding=<span class="string">"0"</span> cellspacing=<span class="string">"0"</span> style=<span class="string">"width: 132%"</span>&gt;</span><br><span class="line">                                        &lt;tr&gt;</span><br><span class="line">                                          </span><br><span class="line">                                        &lt;/tr&gt;</span><br><span class="line">                                    &lt;/table&gt;</span><br><span class="line">                            &lt;/dx:PanelContent&gt;</span><br><span class="line">                        &lt;/PanelCollection&gt;</span><br><span class="line">                    &lt;/dx:ASPxPanel&gt;</span><br><span class="line">                &lt;/dx:PopupControlContentControl&gt;</span><br><span class="line">            &lt;/ContentCollection&gt;</span><br><span class="line">        &lt;/dx:ASPxPopupControl&gt;</span><br></pre></td></tr></table></figure>

<h3 id="GirdView-初级用法"><a href="#GirdView-初级用法" class="headerlink" title="GirdView 初级用法"></a>GirdView 初级用法</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 前台建立 gridview</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. gridview 中文化</span></span><br><span class="line">&lt;SettingsText EmptyDataRow=<span class="string">"无数据显示"</span> /&gt;&lt;SettingsPager&gt;</span><br><span class="line">&lt;Settings ShowFilterRow=<span class="string">"True"</span> /&gt;</span><br><span class="line">&lt;Summary Text=<span class="string">"第&#123;0&#125;页  共&#123;1&#125;页 (共&#123;2&#125; 项)"</span> /&gt;&lt;/SettingsPager&gt;</span><br><span class="line">&lt;SettingsLoadingPanel Text=<span class="string">"请稍后"</span> /&gt;&lt;Settings ShowFilterRow=<span class="string">"True"</span> /&gt;</span><br><span class="line">&lt;dx:GridViewCommandColumn ShowInCustomizationForm=<span class="string">"True"</span> VisibleIndex=<span class="string">"0"</span> Caption=<span class="string">"操作"</span>&gt;</span><br><span class="line">    &lt;EditButton Visible=<span class="string">"True"</span> Text=<span class="string">"编辑"</span>&gt;&lt;/EditButton&gt;</span><br><span class="line">    &lt;DeleteButton Visible=<span class="string">"True"</span> Text=<span class="string">"删除"</span>&gt;&lt;/DeleteButton&gt;</span><br><span class="line">    &lt;ClearFilterButton Visible=<span class="string">"True"</span> Text=<span class="string">"清除过滤条件"</span>&gt;</span><br><span class="line">        &lt;Image Url=<span class="string">"~/Images/gclear.png"</span>&gt;&lt;/Image&gt;</span><br><span class="line">    &lt;/ClearFilterButton&gt;</span><br><span class="line">    &lt;CancelButton Text=<span class="string">"取消"</span>&gt;</span><br><span class="line">        &lt;Image Url=<span class="string">"~/Images/gcancel.png"</span>&gt;</span><br><span class="line">        &lt;/Image&gt;</span><br><span class="line">    &lt;/CancelButton&gt;</span><br><span class="line">    &lt;UpdateButton Text=<span class="string">"确认"</span>&gt; &lt;/UpdateButton&gt;</span><br><span class="line">&lt;/dx:GridViewCommandColumn&gt;</span><br><span class="line"><span class="comment">// 3. gridview 后台事件</span></span><br><span class="line">OnRowUpdating=<span class="string">"row_editing"</span> <span class="comment">// 更新事件</span></span><br><span class="line">OnStartRowEditing=<span class="string">"start_row_editing"</span> <span class="comment">// 点击事件</span></span><br><span class="line">OnDetailRowExpandedChanged=<span class="string">"expand_detail"</span> <span class="comment">// 细节展开</span></span><br><span class="line"></span><br><span class="line">ClientIDMode=<span class="string">"AutoID"</span>  EnableRowsCache=<span class="string">"true"</span> KeyFieldName=<span class="string">"ID"</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义编辑框</span></span><br><span class="line">&lt;SettingsDetail ShowDetailRow=<span class="string">"true"</span> ExportMode=<span class="string">"All"</span> ShowDetailButtons=<span class="string">"true"</span> AllowOnlyOneMasterRowExpanded=<span class="string">"true"</span> /&gt; <span class="comment">// 展示细节</span></span><br><span class="line">&lt;Templates&gt;</span><br><span class="line">    &lt;EditForm&gt;</span><br><span class="line">        &lt;div style=<span class="string">"padding:4px 4px 3px 4px"</span>&gt;</span><br><span class="line">            &lt;dx:ASPxPageControl ID=<span class="string">"ASPxPageControl1"</span> runat=<span class="string">"server"</span> Width=<span class="string">"100%"</span> ActiveTabIndex=<span class="string">"0"</span>&gt;</span><br><span class="line">                &lt;TabPages&gt;</span><br><span class="line">                    &lt;dx:TabPage Text=<span class="string">"基本信息"</span> Visible=<span class="string">"true"</span>&gt;</span><br><span class="line">                       &lt;ContentCollection&gt;</span><br><span class="line">                            &lt;dx:ContentControl&gt;</span><br><span class="line">                                &lt;dx:ASPxGridViewTemplateReplacement ID =<span class="string">"Editors"</span> ReplacementType=<span class="string">"EditFormEditors"</span> runat=<span class="string">"server"</span>/&gt;</span><br><span class="line">                            &lt;/dx:ContentControl&gt;</span><br><span class="line">                        &lt;/ContentCollection&gt;</span><br><span class="line">                    &lt;/dx:TabPage&gt;</span><br><span class="line">                &lt;/TabPages&gt;</span><br><span class="line">            &lt;/dx:ASPxPageControl&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div style=<span class="string">"text-align: right; padding: 2px 2px 2px 2px"</span>&gt;</span><br><span class="line">            &lt;dx:ASPxGridViewTemplateReplacement ID=<span class="string">"UpdateButton"</span> ReplacementType=<span class="string">"EditFormUpdateButton"</span> runat=<span class="string">"server"</span>&gt;&lt;/dx:ASPxGridViewTemplateReplacement&gt;</span><br><span class="line">            &lt;dx:ASPxGridViewTemplateReplacement ID=<span class="string">"CancelButton"</span> ReplacementType=<span class="string">"EditFormCancelButton"</span>runat=<span class="string">"server"</span>&gt;&lt;/dx:ASPxGridViewTemplateReplacement&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/EditForm&gt;</span><br><span class="line">&lt;/Templates&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 建立gridview下拉框列</span></span><br><span class="line"></span><br><span class="line">&lt;dx:GridViewDataComboBoxColumn FieldName=<span class="string">"ProductCode"</span> Caption=<span class="string">"产品编码"</span> ReadOnly=<span class="string">"true"</span> VisibleIndex=<span class="string">"4"</span> &gt;</span><br><span class="line">    &lt;PropertiesComboBox ValueType=<span class="string">"System.String"</span> DataSourceID=<span class="string">"LinqDataSourceCoding"</span> TextField=<span class="string">"ProductName"</span> ValueField=<span class="string">"Coding"</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/PropertiesComboBox&gt;</span><br><span class="line">&lt;/dx:GridViewDataComboBoxColumn&gt;</span><br></pre></td></tr></table></figure>

<h3 id="下拉框"><a href="#下拉框" class="headerlink" title="下拉框"></a>下拉框</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. combo box 优选</span></span><br><span class="line"><span class="comment">//combo box 是一个 文本输入框 和 一个 列表或下拉列表 的 组合。</span></span><br><span class="line"><span class="comment">//用户可以在文本输入框中输入内容（这时combo box可以有以下行为：combo box的列表可以在它的所有选项中寻找匹配项，并高亮显示一个可能的匹配项</span></span><br><span class="line"><span class="comment">// 1.1 前台绑定数据方法</span></span><br><span class="line"><span class="comment">// TextField 文本显示 valueId 实际选值 输入匹配规则 IncrementalFilteringMode="Contains"</span></span><br><span class="line">&lt;dx:ASPxComboBox ID=<span class="string">"ASPxComboBox1"</span> runat=<span class="string">"server"</span>  DataSourceID=<span class="string">"LinqDataSourcePackage"</span> TextField=<span class="string">"Name"</span> ValueField=<span class="string">"ID"</span> IncrementalFilteringMode=<span class="string">"Contains"</span>&gt;&lt;/dx:ASPxComboBox&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.2 后台绑定数据方法</span></span><br><span class="line"><span class="comment">// 1.2.1 后台更加灵活</span></span><br><span class="line"><span class="keyword">var</span> levelList = kkdb.GetTable&lt;K_P_Level&gt;();</span><br><span class="line"><span class="keyword">foreach</span>(<span class="keyword">var</span> i <span class="keyword">in</span> levelList)&#123;</span><br><span class="line">    ASPxComboBox4.Items.Add(i.Name+<span class="string">"|"</span>+i.Coding,i.ID);</span><br><span class="line">&#125;</span><br><span class="line">ASPxComboBox4.SelectedIndex = <span class="number">-1</span>;</span><br><span class="line">ASPxComboBox4.DataBind();</span><br><span class="line"><span class="comment">// 1.2.1 </span></span><br><span class="line">comboBox1.DataSource = levelList;</span><br><span class="line">comboBox1.DisplayMember = <span class="string">"Name"</span>;</span><br><span class="line">comboBox1.ValueMember = <span class="string">"Value"</span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> aa = ASPxComboBox4.Value;</span><br><span class="line"><span class="comment">// 2. dropdownList</span></span><br><span class="line"><span class="comment">//用户点击drop down list时，会展开一个一个“下拉”的列表，用户可以从列表中选择一项。</span></span><br><span class="line"><span class="comment">//这些选项都是预先定义好的，用户只能从中选择，不能自己输入新的内容。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. combo box 点击事件</span></span><br><span class="line"><span class="comment">// 无法触发 onselect 事件是因为缺少属性 autopostback</span></span><br><span class="line"><span class="comment">// 前台必加属性</span></span><br><span class="line">OnSelectedIndexChanged=<span class="string">"SetCodeText"</span>  EnableViewState=<span class="string">"true"</span> AutoPostBack=<span class="string">"true"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// c# 方法</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">SetCodeText</span>(<span class="params"><span class="keyword">object</span> source, EventArgs e</span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用后台方法会触发刷新 可以使用前台js 方法 </span></span><br><span class="line">&lt;dx:ASPxComboBox ID=<span class="string">"ASPxComboBoxForProduct"</span> runat=<span class="string">"server"</span> IncrementalFilteringMode=<span class="string">"Contains"</span>&gt;</span><br><span class="line">    &lt;ClientSideEvents SelectedIndexChanged=<span class="string">"function(s,e)&#123;alert(1)&#125;"</span>/&gt;</span><br><span class="line">&lt;/dx:ASPxComboBox&gt;</span><br></pre></td></tr></table></figure>

<h3 id="前台调用后台方法"><a href="#前台调用后台方法" class="headerlink" title="前台调用后台方法"></a>前台调用后台方法</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. ajax </span></span><br><span class="line"><span class="comment">// 1.1 建立ashx文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">            type: <span class="string">"POST"</span>,</span><br><span class="line">            data: &#123; <span class="string">"surfaceID"</span>: surfaceID &#125;,</span><br><span class="line">            url: <span class="string">"../handler/GetSurfaceModelHandler.ashx"</span>,</span><br><span class="line">            success: getsurfacemodelsucc</span><br><span class="line">        &#125;);</span><br><span class="line"><span class="comment">// 2. </span></span><br><span class="line"><span class="function">function <span class="title">Init</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">      <span class="keyword">var</span> v = <span class="string">"来电"</span>;</span><br><span class="line">      <span class="keyword">var</span> s = <span class="string">'&lt;%=receiveCall("'</span>+v+<span class="string">'") %&gt;'</span>;</span><br><span class="line">      alert(s);</span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">string</span> <span class="title">receiveCall</span>(<span class="params"><span class="keyword">string</span> strNum</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   strNum = <span class="string">"小明"</span> + strNum;</span><br><span class="line">   <span class="keyword">return</span> strNum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 3.</span></span><br></pre></td></tr></table></figure>

<h3 id="后台调用前台"><a href="#后台调用前台" class="headerlink" title="后台调用前台"></a>后台调用前台</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">　<span class="comment">//如果有UpdatePanel就用如下代码调用前台js</span></span><br><span class="line">　　　　ScriptManager.RegisterStartupScript(UpdatePanel1, <span class="keyword">this</span>.Page.GetType(), <span class="string">""</span>, <span class="string">"Ceshi();"</span>, <span class="literal">true</span>);</span><br><span class="line">　　　　<span class="comment">//如果没有就如下代码</span></span><br><span class="line">　　　　<span class="keyword">this</span>.Page.ClientScript.RegisterStartupScript(<span class="keyword">this</span>.Page.GetType(), <span class="string">""</span>, <span class="string">"&lt;script&gt;Ceshi();&lt;/script&gt;"</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="number">1.</span> 后台</span><br><span class="line">    <span class="comment">// 使用前台的代码</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">useJs</span>(<span class="params">String jsCode</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        ScriptManager.RegisterClientScriptBlock(<span class="keyword">this</span>, <span class="keyword">this</span>.GetType(), <span class="keyword">this</span>.UniqueID, jsCode, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="number">2.</span> 前台</span><br><span class="line">    &lt;asp:ScriptManager runat=<span class="string">"server"</span>&gt;&lt;/asp:ScriptManager&gt;</span><br></pre></td></tr></table></figure>

<h3 id="updatePanel"><a href="#updatePanel" class="headerlink" title="updatePanel"></a>updatePanel</h3><ol>
<li>异步刷新模块</li>
</ol>
<h3 id="linq-相关操作"><a href="#linq-相关操作" class="headerlink" title="linq 相关操作"></a>linq 相关操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ASPXButton"><a href="#ASPXButton" class="headerlink" title="ASPXButton"></a>ASPXButton</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 后台方法 拖动添加 onclik</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 前台方法 调用 js</span></span><br><span class="line">&lt;dx:ASPxButton Text=<span class="string">"添加包装物料"</span> ID=<span class="string">"newFormulaButton"</span> runat=<span class="string">"server"</span> &gt;</span><br><span class="line">    &lt;ClientSideEvents Click=<span class="string">"function(s, e) &#123; MenuItemClick(e);&#125;"</span>/&gt;</span><br><span class="line">&lt;/dx:ASPxButton&gt;</span><br></pre></td></tr></table></figure>

<h3 id="添加产品类型"><a href="#添加产品类型" class="headerlink" title="添加产品类型"></a>添加产品类型</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加类型下拉全国</span></span><br><span class="line"><span class="comment">// 1. 引入cs 文件</span></span><br><span class="line"><span class="keyword">using</span> DigitalSystem.utl;</span><br><span class="line"><span class="comment">// 2. 前台建立类型下拉框组件</span></span><br><span class="line">&lt;dx:ASPxDropDownEdit ID=<span class="string">"ddSelectDepartment"</span> runat=<span class="string">"server"</span>  Width=<span class="string">"100%"</span>  </span><br><span class="line">ClientInstanceName=<span class="string">"ddSelectDepartment"</span> EnableAnimation=<span class="string">"False"</span> ReadOnly=<span class="string">"True"</span>&gt;</span><br><span class="line">    &lt;DropDownWindowTemplate&gt;</span><br><span class="line">        &lt;div style=<span class="string">"overflow: auto; height: 300px;"</span>&gt;</span><br><span class="line">            &lt;dx:ASPxTreeView ID=<span class="string">"ASPxTreeView1"</span> runat=<span class="string">"server"</span> OnVirtualModeCreateChildren=<span class="string">"ASPxTreeView1_VirtualModeCreateChildren"</span></span><br><span class="line">                ClientIDMode=<span class="string">"AutoID"</span> EnableAnimation=<span class="string">"False"</span> EnableCallBacks=<span class="string">"true"</span> AllowSelectNode=<span class="string">"True"</span> &gt;</span><br><span class="line">                    &lt;ClientSideEvents NodeClick=<span class="string">"function(s,e)&#123;click_callbackForProduct.PerformCallback(e.node.name);</span></span><br><span class="line"><span class="string">                        ddSelectDepartment.HideDropDown();ddSelectDepartment.SetKeyValue(e.node.name);  </span></span><br><span class="line"><span class="string">                        ddSelectDepartment.SetText(e.node.GetText());&#125;"</span> /&gt; </span><br><span class="line">            &lt;/dx:ASPxTreeView&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/DropDownWindowTemplate&gt;</span><br><span class="line">&lt;/dx:ASPxDropDownEdit&gt;</span><br><span class="line"><span class="comment">// 3. 前台建立产品下拉框组件</span></span><br><span class="line">&lt;dx:ASPxCallbackPanel ID=<span class="string">"click_callbackForProduct"</span>  LoadingPanelText=<span class="string">"请稍后"</span> ClientInstanceName=<span class="string">"click_callbackForProduct"</span> </span><br><span class="line">runat=<span class="string">"server"</span>  Width=<span class="string">"100%"</span> OnCallback=<span class="string">"click_nodeforProduct"</span>&gt;</span><br><span class="line">    &lt;PanelCollection&gt;</span><br><span class="line">        &lt;dx:PanelContent&gt;</span><br><span class="line">            &lt;dx:ASPxComboBox ID=<span class="string">"ASPxComboBoxForProduct"</span> runat=<span class="string">"server"</span> IncrementalFilteringMode=<span class="string">"Contains"</span>&gt;&lt;/dx:ASPxComboBox&gt;</span><br><span class="line">        &lt;/dx:PanelContent&gt;</span><br><span class="line">    &lt;/PanelCollection&gt;</span><br><span class="line">&lt;/dx:ASPxCallbackPanel&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 后台配置数据源</span></span><br><span class="line"><span class="comment">// 4.1 配置 treeview</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> ASPxTreeView1_VirtualModeCreateChildren</span><br><span class="line">(<span class="keyword">object</span> source, DevExpress.Web.ASPxTreeView.TreeViewVirtualModeCreateChildrenEventArgs e)</span><br><span class="line">    &#123;</span><br><span class="line">        utl.newCreateTree(e, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// 4.2 接收传过来的值click_callbackForProduct</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">click_nodeforProduct</span>(<span class="params"><span class="keyword">object</span> sender, CallbackEventArgsBase e</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">int</span> typeId = <span class="keyword">int</span>.Parse(e.Parameter);</span><br><span class="line">        ArrayList result = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        result.Add(typeId);</span><br><span class="line">        <span class="comment">// 查询类型下的所有子类型</span></span><br><span class="line">        utl.findTypelList(typeId, result);</span><br><span class="line"></span><br><span class="line">        List&lt;K_P_Product&gt; productList = <span class="keyword">new</span> List&lt;K_P_Product&gt;();</span><br><span class="line">        productList = utl.findAllProduct(result);</span><br><span class="line">        ASPxComboBoxForProduct.DataSource = productList;</span><br><span class="line">        ASPxComboBoxForProduct.TextField = <span class="string">"ProductName"</span>;</span><br><span class="line">        ASPxComboBoxForProduct.ValueField = <span class="string">"ID"</span>;</span><br><span class="line">        ASPxComboBoxForProduct.DataBind();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="添加仓库产品"><a href="#添加仓库产品" class="headerlink" title="添加仓库产品"></a>添加仓库产品</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 前台同上</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 后台</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> ASPxTreeView1_VirtualModeCreateChildren</span><br><span class="line">(<span class="keyword">object</span> source, DevExpress.Web.ASPxTreeView.TreeViewVirtualModeCreateChildrenEventArgs e)</span><br><span class="line">        &#123;</span><br><span class="line">            db.newDepotTree(e, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">click_nodeforProduct</span>(<span class="params"><span class="keyword">object</span> sender, CallbackEventArgsBase e</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">int</span> depotId = <span class="keyword">int</span>.Parse(e.Parameter);</span><br><span class="line">            <span class="comment">// 找到仓库中不重复的产品名称</span></span><br><span class="line">            <span class="keyword">var</span> productList = pd.findAllProductInDepot(depotId);</span><br><span class="line">            <span class="comment">// 产品名称去重</span></span><br><span class="line">            <span class="keyword">var</span> nameList = productList.GroupBy(p =&gt; <span class="keyword">new</span> &#123; p.ProductCode &#125;).Select(g =&gt; g.First());</span><br><span class="line">            <span class="comment">//var nameList = from p in productList select p.ProductCode.Distinct();</span></span><br><span class="line">            ArrayList arr = <span class="keyword">new</span> ArrayList();</span><br><span class="line">            <span class="keyword">foreach</span> (<span class="keyword">var</span> i <span class="keyword">in</span> nameList) &#123;</span><br><span class="line">                arr.Add(i.ProductCode);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 找到对应的产品</span></span><br><span class="line">            <span class="keyword">var</span> reList = pd.findAllProductByName(arr);</span><br><span class="line">            ASPxComboBoxForProduct.DataSource = reList;</span><br><span class="line">            ASPxComboBoxForProduct.TextField = <span class="string">"ProductName"</span>;</span><br><span class="line">            ASPxComboBoxForProduct.ValueField = <span class="string">"ID"</span>;</span><br><span class="line">            ASPxComboBoxForProduct.DataBind();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h3 id="获取url-中的参数"><a href="#获取url-中的参数" class="headerlink" title="获取url 中的参数"></a>获取url 中的参数</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe src=<span class="string">"floder/productFormula.aspx?productInfoId=1"</span>&gt;</span><br><span class="line"><span class="string">"&lt;a href="</span> + <span class="string">"/projectinfo/ProjectSearchDetailInfo.aspx?projectInfoId="</span> + projectID + <span class="string">"&gt;"</span></span><br><span class="line">pagelod:</span><br><span class="line"><span class="keyword">if</span>(!IsPostBack)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (Request[<span class="string">"productInfoId"</span>]!=<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                HideFieldForProductID.Value = Request[<span class="string">"productInfoId"</span>];</span><br><span class="line">                prductID = <span class="keyword">int</span>.Parse(Request[<span class="string">"productInfoId"</span>]);</span><br><span class="line">                ASPxGridViewForProduct.DataBind();</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="设置-session"><a href="#设置-session" class="headerlink" title="设置 session"></a>设置 session</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设值</span></span><br><span class="line">Session[<span class="string">"product_formula"</span>] = e.EditingKeyValue.ToString();</span><br><span class="line"><span class="comment">// 取值</span></span><br><span class="line">HideFieldForProductID.Value = Convert.ToString(Session[<span class="string">"product_formula"</span>]);</span><br></pre></td></tr></table></figure>

<h3 id="编号生成"><a href="#编号生成" class="headerlink" title="编号生成"></a>编号生成</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!IsPostBack)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 生成一个入库单编号</span></span><br><span class="line">         <span class="keyword">string</span> code = pd.generateNumber(<span class="string">"K_D_StoreReceipt"</span>, <span class="string">"入库"</span>);</span><br><span class="line">         <span class="comment">// 隐藏域赋值</span></span><br><span class="line">         storeReceipt.Value = code;</span><br><span class="line">         <span class="comment">// 编号赋值</span></span><br><span class="line">         StoreCode.Text = code;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="文字圈框"><a href="#文字圈框" class="headerlink" title="文字圈框"></a>文字圈框</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;fieldset&gt;</span><br><span class="line">    &lt;legend&gt;</span><br><span class="line">      &lt;dx:ASPxLabel ID=<span class="string">"ASPxLabel7"</span> runat=<span class="string">"server"</span> Text=<span class="string">"修改/保存工艺参数"</span> Font-Size=<span class="string">"Large"</span>&gt;</span><br><span class="line">      &lt;/dx:ASPxLabel&gt;</span><br><span class="line">    &lt;/legend&gt;</span><br><span class="line">&lt;/fieldset&gt;</span><br></pre></td></tr></table></figure>

<h3 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Convert.toInt32();</span><br><span class="line">Conver.toString();</span><br><span class="line"><span class="keyword">float</span>.prase();</span><br><span class="line"></span><br><span class="line">时间类型 </span><br><span class="line"><span class="comment">// 只包含年月日</span></span><br><span class="line">date</span><br><span class="line"><span class="comment">// 转换</span></span><br><span class="line">DateTime now = Convert.ToDateTime(date);</span><br><span class="line">now.date = date;</span><br><span class="line"><span class="comment">// 包含具体时间</span></span><br><span class="line">datetime</span><br><span class="line">DateTime now = Convert.ToDateTime(date);</span><br></pre></td></tr></table></figure>

<h2 id="excel-导出"><a href="#excel-导出" class="headerlink" title="excel 导出"></a>excel 导出</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 设置选取要打印的内容</span></span><br><span class="line">&lt;!--startprint1--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--endprint1--&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 获取html元素</span></span><br><span class="line"></span><br><span class="line">&lt;dx:ASPxButton ID=<span class="string">"exportExcel"</span> runat=<span class="string">"server"</span> Text=<span class="string">"导出表格"</span> AutoPostBack=<span class="string">"false"</span>&gt;</span><br><span class="line">      &lt;ClientSideEvents Click=<span class="string">"function(s,e)&#123;begin();&#125;"</span> /&gt;</span><br><span class="line">&lt;/dx:ASPxButton&gt;</span><br><span class="line"></span><br><span class="line">&lt;dx:ASPxButton ID=<span class="string">"buttonToSaveHtml"</span> ClientInstanceName=<span class="string">"buttonToSaveHtml"</span> ClientVisible=<span class="string">"false"</span> runat=<span class="string">"server"</span> AutoPostBack=<span class="string">"false"</span>&gt;</span><br><span class="line">      &lt;ClientSideEvents Click=<span class="string">"function(s,e)&#123;preview(1);&#125;"</span> /&gt;</span><br><span class="line">&lt;/dx:ASPxButton&gt;</span><br><span class="line"></span><br><span class="line">&lt;dx:ASPxButton ID=<span class="string">"createExcel"</span> ClientInstanceName=<span class="string">"createExcel"</span> runat=<span class="string">"server"</span> ClientVisible=<span class="string">"false"</span> AutoPostBack=<span class="string">"false"</span> OnClick=<span class="string">"createExcel_Click"</span>&gt;</span><br><span class="line">&lt;/dx:ASPxButton&gt;</span><br><span class="line"></span><br><span class="line">&lt;dx:ASPxCallbackPanel ID=<span class="string">"toexcel"</span> ClientInstanceName=<span class="string">"toexcel"</span> runat=<span class="string">"server"</span> OnCallback=<span class="string">"toexcel_Callback"</span>&gt;</span><br><span class="line">     &lt;ClientSideEvents EndCallback=<span class="string">"download"</span> /&gt;</span><br><span class="line">        &lt;PanelCollection&gt;</span><br><span class="line">         &lt;dx:PanelContent&gt;</span><br><span class="line">             &lt;dx:ASPxHiddenField ID=<span class="string">"tablehtml"</span> runat=<span class="string">"server"</span> ClientInstanceName=<span class="string">"tablehtml"</span>&gt;&lt;/dx:ASPxHiddenField&gt;</span><br><span class="line">         &lt;/dx:PanelContent&gt;</span><br><span class="line"> &lt;/PanelCollection&gt;</span><br><span class="line">&lt;/dx:ASPxCallbackPanel&gt;</span><br><span class="line"></span><br><span class="line"> <span class="function">function <span class="title">begin</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">     <span class="keyword">var</span> savehtmlbutton = document.getElementById(<span class="string">"&lt;%=buttonToSaveHtml.ClientID%&gt;"</span>);</span><br><span class="line">     savehtmlbutton.click();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">function <span class="title">download</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">       <span class="keyword">var</span> createexcelbutton = document.getElementById(<span class="string">"&lt;%=createExcel.ClientID%&gt;"</span>);</span><br><span class="line">       <span class="comment">//setTimeout(function () &#123; createexcelbutton.click(); &#125;, 5000);</span></span><br><span class="line">       createexcelbutton.click();</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line"><span class="function">function <span class="title">preview</span>(<span class="params">oper</span>)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (oper &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                bdhtml = window.document.body.innerHTML;<span class="comment">//获取当前页的html代码</span></span><br><span class="line">                <span class="comment">//winname = window.open('', "_blank", '');</span></span><br><span class="line">                sprnstr = <span class="string">"&lt;!--startprint"</span> + oper + <span class="string">"--&gt;"</span>;<span class="comment">//设置打印开始区域</span></span><br><span class="line">                eprnstr = <span class="string">"&lt;!--endprint"</span> + oper + <span class="string">"--&gt;"</span>;<span class="comment">//设置打印结束区域</span></span><br><span class="line">                prnhtml = bdhtml.substring(bdhtml.indexOf(sprnstr) + <span class="number">18</span>); <span class="comment">//从开始代码向后取html</span></span><br><span class="line"></span><br><span class="line">                prnhtml = prnhtml.substring(<span class="number">0</span>, prnhtml.indexOf(eprnstr));<span class="comment">//从结束代码向前取html</span></span><br><span class="line">                <span class="comment">//      window.document.body.innerHTML = prnhtml;</span></span><br><span class="line">                <span class="keyword">var</span> temp1 = prnhtml.split(<span class="string">'&lt;div&gt;'</span>);</span><br><span class="line">                <span class="comment">//alert("temp1=" + temp1);</span></span><br><span class="line">                <span class="keyword">var</span> temp2 = temp1[<span class="number">1</span>];</span><br><span class="line">                <span class="comment">//alert("temp2=" + temp2);</span></span><br><span class="line">                <span class="keyword">var</span> temp3 = temp2.split(<span class="string">'&lt;/div&gt;'</span>);</span><br><span class="line">                <span class="comment">//alert("temp3=" + temp3);</span></span><br><span class="line">                <span class="keyword">var</span> tablehtml = temp3[<span class="number">0</span>];</span><br><span class="line">                <span class="comment">//alert("prnhtml=" + prnhtml);</span></span><br><span class="line">                <span class="comment">//alert("tablehtml=" + tablehtml);</span></span><br><span class="line">                toexcel.PerformCallback(tablehtml);</span><br><span class="line">                <span class="comment">//alert(1);</span></span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 后台方法</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">toexcel_Callback</span>(<span class="params"><span class="keyword">object</span> sender, DevExpress.Web.ASPxClasses.CallbackEventArgsBase e</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">if</span> (e.Parameter.ToString() == <span class="string">"empty"</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                tablehtml[<span class="string">"htmltable"</span>] = <span class="string">""</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> cols = submitGrid.Columns.Count;</span><br><span class="line">                <span class="comment">//int tableid = Convert.ToInt32(TableName);</span></span><br><span class="line">                <span class="comment">//var table = db.D_TableInfo.SingleOrDefault(t =&gt; t.ID == tableid);</span></span><br><span class="line">                <span class="keyword">string</span> temp1 = e.Parameter.ToString();</span><br><span class="line">                <span class="keyword">string</span> temp2 = temp1.Substring(<span class="number">4</span>, temp1.Length - <span class="number">7</span>);</span><br><span class="line">                <span class="keyword">string</span>[] sArray = Regex.Split(temp2, <span class="string">"&lt;tbody&gt;"</span>, RegexOptions.IgnoreCase);</span><br><span class="line">                <span class="keyword">string</span> tableline = <span class="string">"&lt;tbody&gt;&lt;tr class=\"lup\" align=\"center\"&gt;\n\t\t\t\t\t&lt;th colspan=\""</span> + cols + <span class="string">"\" rowspan=\"1\" bordercolor=\"#333333\" style=\"font-size:large;border-width:1px;border-style:solid;\"&gt;"</span> + TableName + <span class="string">"&lt;/th&gt;&lt;/tr&gt;"</span> + <span class="string">"&lt;tr class=\"lup\" align=\"center\"&gt;\n\t\t\t\t\t&lt;th  align=\"left\" colspan=\""</span> + cols / <span class="number">2</span> + <span class="string">"\" bordercolor=\"#333333\" style=\"border-width:1px;border-style:solid;font-size:larger;\"&gt;日期："</span> + DateTime.Now.ToShortDateString() + <span class="string">"&lt;/th&gt;&lt;th colspan=\""</span> + (cols - (cols / <span class="number">2</span>)) + <span class="string">"\" bordercolor=\"#333333\" align=\"right\" style=\"border-width:1px;border-style:solid;font-size:larger;\"&gt;&lt;/th&gt;&lt;/tr&gt;"</span>;</span><br><span class="line">                <span class="keyword">string</span> temp3 = sArray[<span class="number">0</span>] + tableline + sArray[<span class="number">1</span>];</span><br><span class="line">                <span class="comment">//tablehtml["htmltable"] = temp3;</span></span><br><span class="line">                tablehtml.Set(<span class="string">"htmltable"</span>, temp3);</span><br><span class="line">                Session[<span class="string">"htmltable"</span>] = temp3;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line"><span class="comment">// 4. 打印</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">createExcel_Click</span>(<span class="params"><span class="keyword">object</span> sender, EventArgs e</span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">string</span> filename = TableName;</span><br><span class="line">            HttpContext context = HttpContext.Current;</span><br><span class="line">            context.Response.Clear();</span><br><span class="line">            context.Response.Buffer = <span class="literal">true</span>;</span><br><span class="line">            context.Response.Charset = <span class="string">"gb2312"</span>;</span><br><span class="line">            context.Response.AppendHeader(<span class="string">"Content-Disposition"</span>, <span class="string">"attachment;filename="</span> + filename + <span class="string">".xls"</span>);</span><br><span class="line">            context.Response.ContentEncoding = System.Text.Encoding.UTF8;</span><br><span class="line">            context.Response.ContentType = <span class="string">"application/vnd.ms-excel"</span>;</span><br><span class="line">            context.Response.Write(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;meta http-equiv=Content-Type content=\"text/html; charset=utf-8\"&gt;"</span>);</span><br><span class="line">            context.Response.Write(Session[<span class="string">"htmltable"</span>]);</span><br><span class="line">            context.Response.Write(<span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">            Session[<span class="string">"htmltable"</span>] = <span class="string">""</span>;</span><br><span class="line">            context.Response.End();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h2 id="项目安装"><a href="#项目安装" class="headerlink" title="项目安装"></a>项目安装</h2><ol>
<li><p>安装数据库 sql server 2014</p>
</li>
<li><p>安装 vs 2012</p>
</li>
<li><p>附加数据库</p>
<ol>
<li>附加数据库前要先赋予当前用户数据库文件完全控制权限</li>
<li>具体在文件属性，安全，编辑，勾选完全控制权限</li>
<li>在数据库中选择数据库文件所在位置然后添加</li>
</ol>
</li>
<li><p>安装 dev 插件</p>
<ol>
<li>两个文件 一个破解文件 一个安装文件 </li>
</ol>
</li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">
          
        
        <div class="post-tags">
            <a href="/tags/c/" rel="tag"># c#</a>
          
        </div>
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
              <a href="/2019/08/03/hello-world/" rel="next" title="Hello World">
                <i class="fa fa-chevron-left"></i> Hello World
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
          </div>
        </div>
    </footer>
  </div>
  
  
  
  </article>

  </div>


          </div>
          


        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
         
      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/avatar.gif"
      alt="Jack Wang">
  <p class="site-author-name" itemprop="name">Jack Wang</p>
  <div class="site-description motion-element" itemprop="description">个人知识总结</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">20</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/jackwangc" title="GitHub &rarr; https://github.com/jackwangc" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:wang.jie.jack6@gmail.com" title="E-Mail &rarr; mailto:wang.jie.jack6@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-globe"></i>E-Mail</a>
      </span>
    
  </div>


  <div class="links-of-blogroll motion-element links-of-blogroll-block">
    <div class="links-of-blogroll-title">
      <i class="fa  fa-fw fa-link"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://jackwangc.github.io/Docsify/#/" title="https://jackwangc.github.io/Docsify/#/" rel="noopener" target="_blank">Java 面试总结</a>
        </li>
      
    </ul>
  </div>


          <div id = "music">
            <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 
            src="//music.163.com/outchain/player?type=2&id=450795499&auto=1&height=66"></iframe>
          </div>
          
        </div>
      </div>
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#实验室-net-项目常识总结"><span class="nav-number">1.</span> <span class="nav-text">实验室 .net 项目常识总结</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#sql-server-常用操作"><span class="nav-number">1.1.</span> <span class="nav-text">sql server 常用操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基础操作"><span class="nav-number">1.1.1.</span> <span class="nav-text">基础操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#select-语法"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">select 语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#insert-语法"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">insert 语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#update-语法"><span class="nav-number">1.1.1.3.</span> <span class="nav-text">update 语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#delete-语法"><span class="nav-number">1.1.1.4.</span> <span class="nav-text">delete 语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#drop-语法"><span class="nav-number">1.1.1.5.</span> <span class="nav-text">drop 语法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#高级操作"><span class="nav-number">1.1.2.</span> <span class="nav-text">高级操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#高级删除"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">高级删除</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多表查询"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">多表查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#合并查询"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">合并查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#INSERT-INTO-SELECT"><span class="nav-number">1.1.2.4.</span> <span class="nav-text">INSERT INTO SELECT</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#alter-向表中添加约束"><span class="nav-number">1.1.2.5.</span> <span class="nav-text">alter 向表中添加约束</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sql-server-常用数据类型"><span class="nav-number">1.1.2.6.</span> <span class="nav-text">sql server 常用数据类型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#建表"><span class="nav-number">1.1.3.</span> <span class="nav-text">建表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sql-约束（Constraints）"><span class="nav-number">1.1.4.</span> <span class="nav-text">sql 约束（Constraints）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sql-视图"><span class="nav-number">1.1.5.</span> <span class="nav-text">sql 视图</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么情况下会用到视图"><span class="nav-number">1.1.5.1.</span> <span class="nav-text">什么情况下会用到视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#视图的优点"><span class="nav-number">1.1.5.2.</span> <span class="nav-text">视图的优点</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dev-操作"><span class="nav-number">1.2.</span> <span class="nav-text">dev 操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#常见问题"><span class="nav-number">1.2.1.</span> <span class="nav-text">常见问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#aspxSplitter-分隔符用法"><span class="nav-number">1.2.2.</span> <span class="nav-text">aspxSplitter 分隔符用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#treeView-用法"><span class="nav-number">1.2.3.</span> <span class="nav-text">treeView 用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#从一个控件传值到另外一个控件"><span class="nav-number">1.2.4.</span> <span class="nav-text">从一个控件传值到另外一个控件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义数据源"><span class="nav-number">1.2.5.</span> <span class="nav-text">自定义数据源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#弹出框"><span class="nav-number">1.2.6.</span> <span class="nav-text">弹出框</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GirdView-初级用法"><span class="nav-number">1.2.7.</span> <span class="nav-text">GirdView 初级用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#下拉框"><span class="nav-number">1.2.8.</span> <span class="nav-text">下拉框</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#前台调用后台方法"><span class="nav-number">1.2.9.</span> <span class="nav-text">前台调用后台方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#后台调用前台"><span class="nav-number">1.2.10.</span> <span class="nav-text">后台调用前台</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#updatePanel"><span class="nav-number">1.2.11.</span> <span class="nav-text">updatePanel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linq-相关操作"><span class="nav-number">1.2.12.</span> <span class="nav-text">linq 相关操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ASPXButton"><span class="nav-number">1.2.13.</span> <span class="nav-text">ASPXButton</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加产品类型"><span class="nav-number">1.2.14.</span> <span class="nav-text">添加产品类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加仓库产品"><span class="nav-number">1.2.15.</span> <span class="nav-text">添加仓库产品</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取url-中的参数"><span class="nav-number">1.2.16.</span> <span class="nav-text">获取url 中的参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置-session"><span class="nav-number">1.2.17.</span> <span class="nav-text">设置 session</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#编号生成"><span class="nav-number">1.2.18.</span> <span class="nav-text">编号生成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文字圈框"><span class="nav-number">1.2.19.</span> <span class="nav-text">文字圈框</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据类型转换"><span class="nav-number">1.2.20.</span> <span class="nav-text">数据类型转换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#excel-导出"><span class="nav-number">1.3.</span> <span class="nav-text">excel 导出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#项目安装"><span class="nav-number">1.4.</span> <span class="nav-text">项目安装</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      


    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jack Wang</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.3.0</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>

    

  </div>

  
    
    
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  <script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>

  
  <script src="/js/affix.js?v=7.3.0"></script>
  <script src="/js/schemes/pisces.js?v=7.3.0"></script>



  
  <script src="/js/scrollspy.js?v=7.3.0"></script>
<script src="/js/post-details.js?v=7.3.0"></script>



  <script src="/js/next-boot.js?v=7.3.0"></script>

  

  


  


































</body>
</html>
